{% extends "base.html" %}

{% load staticfiles %}


{% block content_container %}
<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <h1>{{ request.site.name }}</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6 col-md-6">

            <p><strong>{{ request.site.name }}</strong> allows someone to send a text message to or call a phone number and receive the weather forecast.</p>

            <p><a href="sms:1-312-818-3823" class="btn btn-default">Text (312) 818-3823</a></p>

            <p><a href="tel:1-312-818-3823" class="btn btn-default">Call (312) 818-3823</a></p>

            <ul>
                <li><a href="https://github.com/richardcornish/smsweather">Code repository</a></li>
                <li><a href="https://smsweather.herokuapp.com/">Deployed app</a></li>
            </ul>

            <h2>How it works</h2>

            <p>A user texts a location to a phone number that is registered with <a href="https://www.twilio.com/">Twilio</a>. Twilio transforms and sends the text message data as an <a href="https://en.wikipedia.org/wiki/POST_(HTTP)">HTTP POST request</a> to a <a href="{% url 'sms' %}">publicly accessible URL</a> in a <a href="https://www.heroku.com/">Heroku</a> app.</p>

            <p>The body of the request is converted from a messy search query into a proper geographic location with the Python <a href="http://docs.python-requests.org/en/master/">Requests</a> library and Google&rsquo;s <a href="https://developers.google.com/maps/documentation/geocoding/start">Geocoding API</a>.</p>

            <p>The location&rsquo;s latitude and longitude is then sent to the <a href="https://darksky.net/dev/">Dark Sky API</a> with the Python <a href="https://github.com/ZeevG/python-forecast.io">Dark Sky Wrapper</a>. I even <a href="https://github.com/ZeevG/python-forecast.io/pull/23">fixed</a> a small bug while using it.</p>

            <p>The properly formatted address, current temperature, and today&rsquo;s weather summary is returned to Twilio as a <a href="https://www.twilio.com/docs/api/twiml">TwiML response</a> with the <a href="https://www.twilio.com/docs/libraries/python">twilio-python</a> library, which Twilio transforms to a text message and returns to the user. Additionally, the phase of the moon is displayed as an appropriate emoji.</p>

        </div>
        <div class="col-sm-6 col-md-4 col-md-offset-1">
            <a href="{% static 'img/screenshot.png' %}"><img src="{% static 'img/screenshot.png' %}" alt="Screenshot" class="img-responsive img-thumbnail"></a>
        </div>
    </div>
</div>
{% endblock %}